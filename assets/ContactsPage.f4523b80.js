import{F as _,a as g,C as r,b as d,E as h,c as F,d as b}from"./ContactForm.module.2ee4eaa5.js";import{d as x,j as e,a as c,r as p,R as k,e as E,F as v,f as M,L as y,g as L,i as P,C as $,u as w,k as I,l as O}from"./index.b91b8df7.js";const R={name:"",number:""},D=/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/im,q=F().shape({name:b().required(),number:b().matches(D,"Phone number is not valid").required()});function B({visibleContacts:n}){const[a]=x();return e(_,{initialValues:R,onSubmit:(t,{resetForm:i})=>{if(n.some(l=>l.name.toLocaleLowerCase()===t.name.toLocaleLowerCase())){alert(`${t.name} is already in Contacts`);return}a(t),i()},validationSchema:q,children:c(g,{className:r.ContactForm,children:[c("label",{className:r.label,htmlFor:"name",children:["Name",e(d,{type:"text",name:"name",className:r.input}),e(h,{name:"name"})]}),c("label",{className:r.label,htmlFor:"number",children:["Phone Number",e(d,{type:"text",name:"number",className:r.input}),e(h,{name:"number"})]}),e("button",{type:"submit",className:r.buttonSubmit,children:"Add Contact"})]})})}const U="_container_h6zv8_1",j="_contactInfo_h6zv8_31",z="_action_h6zv8_41";var u={container:U,contactInfo:j,action:z};const T="_Overlay_1cath_1",V="_Modal_1cath_27";var N={Overlay:T,Modal:V};function A({isOpen:n,onCloseModal:a,children:o}){const t=document.getElementById("modal"),i=p.exports.useRef(null),l=s=>{console.log(s),s.code==="Escape"&&a()},m=s=>{s.target===s.currentTarget&&a()};return p.exports.useEffect(()=>{var s;(s=i.current)==null||s.focus()},[]),n?k.createPortal(e("div",{className:N.Overlay,onClick:m,onKeyDown:l,role:"button",tabIndex:0,ref:i,children:e("div",{className:N.Modal,children:o})}),t):null}const G=/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/im,H=F().shape({name:b().required(),number:b().matches(G,"Phone number is not valid").required()});function K({contact:n,closeModal:a}){const o={name:n.name,number:n.number},[t]=E();return e(_,{initialValues:o,onSubmit:l=>{const m={...l,id:n.id};t(m),a()},validationSchema:H,children:c(g,{className:r.UpdateForm,children:[c("label",{className:r.label,htmlFor:"name",children:["Name",e(d,{type:"text",name:"name",className:r.input}),e(h,{name:"name"})]}),c("label",{className:r.label,htmlFor:"number",children:["Phone Number",e(d,{type:"text",name:"number",className:r.input}),e(h,{name:"number"})]}),e("button",{type:"submit",className:r.buttonSubmit,children:"Update contact"})]})})}function Q({contact:n,onRemove:a}){const[o,t]=p.exports.useState(!1),{name:i,number:l}=n,m=()=>{t(!0)},s=()=>{t(!1)};return c(v,{children:[c("li",{className:u.container,children:[c("div",{className:u.contactInfo,children:[i," : ",l]}),c("section",{className:u.action,children:[e("button",{type:"button",onClick:m,children:"Edit"}),e("button",{type:"button",onClick:a,children:"Delete"})]})]}),e(A,{isOpen:o,onCloseModal:s,children:e(K,{contact:n,closeModal:s})})]})}function J({visibleContacts:n}){const[a,{isLoading:o}]=M();return c(v,{children:[e("ul",{className:u.contactList,children:n.map(t=>e(Q,{contact:t,onRemove:()=>a(t.id)},t.id))}),o&&e(y,{})]})}const W="_filterContainer_r5lvb_1",X="_input_r5lvb_15";var f={filterContainer:W,input:X};function Y(){const{filter:n}=L(),a=P();return e("div",{className:f.filterContainer,children:c("label",{className:f.label,children:["Find contact by name:",e("input",{type:"text",value:n,onChange:o=>a($(o.target.value)),name:"filter",className:f.input})]})})}const Z="_container_1gwkm_1",ee="_heading_1gwkm_19";var C={container:Z,heading:ee};function ae(){const{filter:n}=L(),a=w(),{data:o=[],isLoading:t,error:i}=I(),l=s=>s?s.filter(S=>S.name.toLocaleLowerCase().includes(n.toLocaleLowerCase())):[];p.exports.useEffect(()=>{a(O())},[a]);const m=l(o);return c("div",{className:C.container,children:[e("h2",{className:C.heading,children:"PhoneBook"}),e(B,{visibleContacts:m}),e("h2",{className:C.heading,children:"Contacts"}),o.length>1&&e(Y,{}),o.length>0&&!i&&!t&&e(J,{visibleContacts:m}),t&&e(y,{})]})}export{ae as default};
