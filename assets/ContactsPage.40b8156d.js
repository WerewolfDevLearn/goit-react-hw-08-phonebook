import{F as _,a as g,C as r,b as d,E as h,c as v,d as b}from"./ContactForm.module.65f5a8ea.js";import{d as S,j as e,a as s,r as f,R as x,e as k,F,f as M,L as y,g as L,i as E,C as P,k as $}from"./index.da2f986b.js";const w={name:"",number:""},I=/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/im,O=v().shape({name:b().required(),number:b().matches(I,"Phone number is not valid").required()});function R({visibleContacts:t}){const[n]=S();return e(_,{initialValues:w,onSubmit:(a,{resetForm:l})=>{if(t.some(i=>i.name.toLocaleLowerCase()===a.name.toLocaleLowerCase())){alert(`${a.name} is already in Contacts`);return}n(a),l()},validationSchema:O,children:s(g,{className:r.ContactForm,children:[s("label",{className:r.label,htmlFor:"name",children:["Name",e(d,{type:"text",name:"name",className:r.input}),e(h,{name:"name"})]}),s("label",{className:r.label,htmlFor:"number",children:["Phone Number",e(d,{type:"text",name:"number",className:r.input}),e(h,{name:"number"})]}),e("button",{type:"submit",className:r.buttonSubmit,children:"Add Contact"})]})})}const D="_container_h6zv8_1",q="_contactInfo_h6zv8_31",B="_action_h6zv8_41";var u={container:D,contactInfo:q,action:B};const U="_Overlay_1cath_1",V="_Modal_1cath_27";var N={Overlay:U,Modal:V};function j({isOpen:t,onCloseModal:n,children:o}){const a=document.getElementById("modal"),l=f.exports.useRef(null),i=c=>{c.code==="Escape"&&n()},m=c=>{c.target===c.currentTarget&&n()};return f.exports.useEffect(()=>{var c;(c=l.current)==null||c.focus()},[]),t?x.createPortal(e("div",{className:N.Overlay,onClick:m,onKeyDown:i,role:"button",tabIndex:0,ref:l,children:e("div",{className:N.Modal,children:o})}),a):null}const z=/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/im,T=v().shape({name:b().required(),number:b().matches(z,"Phone number is not valid").required()});function A({contact:t,closeModal:n}){const o={name:t.name,number:t.number},[a]=k();return e(_,{initialValues:o,onSubmit:i=>{const m={...i,id:t.id};a(m),n()},validationSchema:T,children:s(g,{className:r.UpdateForm,children:[s("label",{className:r.label,htmlFor:"name",children:["Name",e(d,{type:"text",name:"name",className:r.input}),e(h,{name:"name"})]}),s("label",{className:r.label,htmlFor:"number",children:["Phone Number",e(d,{type:"text",name:"number",className:r.input}),e(h,{name:"number"})]}),e("button",{type:"submit",className:r.buttonSubmit,children:"Update contact"})]})})}function G({contact:t,onRemove:n}){const[o,a]=f.exports.useState(!1),{name:l,number:i}=t,m=()=>{a(!0)},c=()=>{a(!1)};return s(F,{children:[s("li",{className:u.container,children:[s("div",{className:u.contactInfo,children:[l," : ",i]}),s("section",{className:u.action,children:[e("button",{type:"button",onClick:m,children:"Edit"}),e("button",{type:"button",onClick:n,children:"Delete"})]})]}),e(j,{isOpen:o,onCloseModal:c,children:e(A,{contact:t,closeModal:c})})]})}function H({visibleContacts:t}){const[n,{isLoading:o}]=M();return s(F,{children:[e("ul",{className:u.contactList,children:t.map(a=>e(G,{contact:a,onRemove:()=>n(a.id)},a.id))}),o&&e(y,{})]})}const K="_filterContainer_r5lvb_1",Q="_input_r5lvb_15";var p={filterContainer:K,input:Q};function J(){const{filter:t}=L(),n=E();return e("div",{className:p.filterContainer,children:s("label",{className:p.label,children:["Find contact by name:",e("input",{type:"text",value:t,onChange:o=>n(P(o.target.value)),name:"filter",className:p.input})]})})}const W="_container_1gwkm_1",X="_heading_1gwkm_19";var C={container:W,heading:X};function ee(){const{filter:t}=L(),{data:n=[],isLoading:o,error:a}=$(),i=(m=>m?m.filter(c=>c.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())):[])(n);return s("div",{className:C.container,children:[e("h2",{className:C.heading,children:"PhoneBook"}),e(R,{visibleContacts:i}),e("h2",{className:C.heading,children:"Contacts"}),n.length>1&&e(J,{}),n.length>0&&!a&&!o&&e(H,{visibleContacts:i}),o&&e(y,{})]})}export{ee as default};
